# 强制规范 — AGENTS.md 多专家协作框架

以下 `@./AGENTS.md` 为本项目核心路由规范，**强制生效**。

- 激活专家时，**立即** Read `AgentRoles/<对应专家>.md`，读取完成前禁止执行任何操作
- 未激活时，不主动加载专家文件

@./AGENTS.md

## Plan Mode 执行衔接规则

接受计划（plan mode 批准）后开始执行时，**第一步必须**：
1. 识别对应专家：若 plan 文件 Step 0 已声明专家，直接使用；否则按用户意图判断：
   - 定义/变更需求、功能规格、UI 设计规格、验收标准 → PRD
   - 设计/变更系统架构、技术选型、模块划分 → ARCH
   - 拆解/调整任务、优先级、里程碑 → TASK
   - 编写/修改代码实现功能、修复 bug、编写单元/集成测试 → TDD
   - 编写/执行 E2E、性能、安全测试 → QA
   - 配置/执行 CI/CD、部署或管理环境 → DEVOPS
   - 仍不确定时，读取 `/docs/AGENT_STATE.md` 判断当前阶段
2. 发出 `[[ACTIVATE: X]]` 并立即读取 `AgentRoles/<X>-EXPERT.md`
3. 专家文件读取完成后，再执行具体步骤

同时，写 plan 文件时必须将专家激活作为 **Step 0** 写入：

```markdown
## Step 0：激活专家
[[ACTIVATE: TDD]]  <!-- 替换为实际专家 -->
```

<!-- ⚠️ 以上为模板核心区域，禁止修改。定制内容在分隔线后追加，变更仅在模板源项目（PromptsEngineering）中进行后同步。 -->

---
