# 测试与质量保证文档
> 日期：YYYY-MM-DD   版本：v0.x

## 1. 测试概述
- **目标**：说明本轮 QA 需要保障的核心业务价值与关键验收，例如"验证 US-USER-xxx 注册+支付全链路"。
- **范围与排除**：列出相关 Story ID / 模块（在内）、明确不在本轮验证范围的部分。
- **环境与配置**：描述 Dev/Staging/Prod 环境版本、数据预置、依赖服务状态。
- **团队与角色**：列出 QA Lead、Automation、数据支持等。

## 2. 测试策略
- **测试类型覆盖**：按功能/集成/E2E/契约/回归/性能/安全/降级/事件等分类，并对应 Story/模块列出计划。
- **优先级逻辑**：说明如何将测试用例按 P0~P3 排序（如"P0 = 核心业务流程"）。
- **入口准则**：列出 QA 可开始的前提（PR 合并、Smoke 环境可用）。
- **出口准则**：列出退出标准（P0 全部通过、Traceability 更新、阻塞缺陷处理方案）。
- **工具链/自动化**：列出测试框架、CI Job、报告路径、监控仪表盘。

## 3. 测试矩阵
| Story / AC | Test Case ID | 测试类型 | 模块 | 执行状态 | 环境 | 证据链接 | 关联缺陷 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| US-USER-001 / AC1 | TC-USER-001 | 功能 | user-management | Pass | staging | `/reports/xxx` | BUG-USER-001 |
| US-PAY-002 / AC2 | TC-PAY-002 | 契约 | payment-system | Fail | staging | `/reports/pay` | BUG-PAY-002 |

## 4. 执行统计与指标
- **用例总数**：XX；**执行率**：XX%；**通过率**：XX%；**阻塞数**：XX（附说明）。
- **缺陷密度**：按 P0~P3 统计分布。
- **自动化覆盖率**：XX%（自动化/手工比例）。
- **轮次输出**：列出每轮测试目标、关键问题、处理意见。

## 5. 缺陷与风险
- **阻塞缺陷**：按缺陷报告规范记录（ID、模块、影响、建议回流阶段），并同步至 `/docs/qa-modules/{domain}/defect-log.md`。
- **已知问题**：描述非阻塞缺陷及其影响与缓解计划。
- **风险登记**：列出依赖/环境/性能/数据/合规等高风险项及在 `test-risk-matrix.md` 中的缓解措施。

## 6. NFR 验证
- **指标对照**：性能（响应/吞吐）、可靠性（MTTR/Uptime）、安全（扫描结果）、可观测（日志/告警）。
- **状态**：根据 `/docs/qa-modules/{domain}/nfr-tracking.md` 中条目填入"达标/待复测/需缓解"。
- **缓解措施**：对未达标项描述后续行动与复测时间。

## 7. 发布建议与条件
- **结论**：`建议发布 / 有条件发布（条件） / 不建议发布（原因）`。
- **前置条件**：列出必须满足的项（阻塞缺陷关闭、关键监控上线、数据准备）。
- **降级/回滚方案**：出现问题时的快速响应步骤与责任人。
- **后续行动**：上线后需要关注的监控与复测计划。

## 8. 部署与验证记录
| 环境 | 版本/标签 | 部署时间 | 执行人 | 冒烟结果 | 监控链接 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| staging | vX.X.X | YYYY-MM-DD HH:MM | @devops | 通过 | ... | ... |
| production | vX.X.X | YYYY-MM-DD HH:MM | @release | 阻塞（缺陷 ID） | ... | ... |

## 9. 追溯与附录
- **追溯矩阵**：`/docs/data/traceability-matrix.md`，记录 Story → Test Case → 状态。
- **全局矩阵**：附 `test-strategy-matrix.md`、`test-priority-matrix.md`、`test-risk-matrix.md` 的版本与链接。
- **模块 QA 引用**：如 `/docs/qa-modules/user-management/QA.md`、`priority-matrix.md`。
- **日志与报表**：自动化报告、截图、录屏、CI 报表链接。
