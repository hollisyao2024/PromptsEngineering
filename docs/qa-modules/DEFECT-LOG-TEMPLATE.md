# 模块缺陷日志模板
用于 QA 专家在模块级别跟踪缺陷的物料，便于大模型或 `/qa plan` 参考此模板生成 `docs/qa-modules/{domain}/defect-log.md`，再逐条填充缺陷数据。

## 模板结构

1. **表格概览**：以一张 Markdown 表格列出当前模块所有缺陷的关键信息，后续的细节可引用表格中的 `缺陷 ID`。
2. **缺陷详细条目**：对于每条严重缺陷（P0~P1）或当前阻塞缺陷，提供扩展描述与附件，确保 TDD/ARCH 能复现与跟进。

## 缺陷表格字段
| 缺陷 ID | 标题 | 严重度 | 优先级 | 状态 | 影响模块 | Story / AC | 复现步骤 | 预期 | 实际 | 环境 | 责任人 | 回流阶段 | 验证链接 | 备注 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| BUG-${MODULE}-001 | 支付重试中重复扣款 | P0 | 高 | 阻塞 | payment | US-PAY-002 / AC-003 | 1. ... 2. ... | 不重复扣款 | 重复 | staging | @qa-${module} | TDD fix | https://ci/log | 待 TDD 提供 fix |

## 字段说明与对齐
- `缺陷 ID`：统一 `BUG-${MODULE}-NNN`，方便 Traceability、缺陷与 QA 输出互链。
- `Story / AC`：必须与 PRD 中的 Story ID、验收标准对应，方便 TDD 定位上下文。
- `复现步骤/环境/预期/实际`：应用 Handbook §8.3 模板，确保信息完整；环境需包含 env/版本/配置。
- `状态`：使用 `Open/In Review/Fixed/Verified/Closed` 控制流转；阻塞缺陷务必标识为 `Open` 并提示 TDD 立即处理。
- `回流阶段`：填入 `TDD fix`/`ARCH review`/`QA retest` 等，便于跨阶段追踪。
- `验证链接`：指向测试报告/自动化结果/截图，提升可审核性。
- `备注`：记录任何额外背景（依赖、风险、临时缓解）。

## 扩展说明（供大模型生成完整的 defect-log.md）
- **引言段**：简要说明当前模块缺陷概况（缺陷总量、P0~P2 分布、阻塞状况），可由大模型根据表格数据自动整理。
- **分节描述**：可按 `阻塞缺陷`、`复测中`、`历史缺陷` 分节，每节前放简短说明，表格中的缺陷按状态或 Story 分类。
- **操作建议**：为每个阻塞或高风险缺陷附上建议回流操作（如“需 TDD 在 2025-11-10 前修复”），并提示 QA 后续验证窗口。
- **Traceability 对齐**：生成时同步更新 `/docs/data/traceability-matrix.md`，确保每条缺陷对应的 Story/Test Case 的状态也被写入 `traceability`。

## 使用提示
- 若使用大模型自动生成，请先提供模块名称、当前 Story 列表、已知缺陷摘要，让模型填充表格与扩展段落，并在生成完成后由 QA 复核回流阶段/验证链接。
- 可通过 `/qa plan` 的模块化流程写入此模板，或在模块 QA 文档中引用模板路径 `docs/qa-modules/defect-log-template.md` 作为生成指引。
