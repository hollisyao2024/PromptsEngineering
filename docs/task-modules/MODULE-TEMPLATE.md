# {功能域名称} - 任务计划模块

> 所属主 TASK: [TASK.md](../TASK.md)
> 负责团队: @team-name
> 最后更新: YYYY-MM-DD

---

## 1. 模块概述

### 1.1 功能域定义
<!-- 简述本模块的功能范围 -->
- **功能域**: {功能域名称}
- **业务目标**: {业务目标描述}
- **关联 PRD 模块**: [prd-modules/{domain}.md](../prd-modules/{domain}.md)
- **关联 ARCH 模块**: [arch-modules/{domain}.md](../arch-modules/{domain}.md)

### 1.2 本模块范围
- 核心功能 1
- 核心功能 2
- 核心功能 3

---

## 2. WBS（工作分解结构）

### 阶段 1：基础设施（2 周）

| Task ID | 任务名称 | 描述 | 工作量（人天） | 负责人 | 依赖 | 状态 |
|---------|---------|------|--------------|--------|------|------|
| TASK-{MODULE}-001 | 数据库表设计 | 创建核心数据表 | 2 | @dev-a | - | ✅ 完成 |
| TASK-{MODULE}-002 | API 框架搭建 | 初始化项目结构 | 3 | @dev-a | TASK-{MODULE}-001 | 🔄 进行中 |
| TASK-{MODULE}-003 | 基础工具类 | 实现通用工具函数 | 2 | @dev-b | TASK-{MODULE}-002 | 📝 待启动 |

### 阶段 2：核心功能（4 周）

| Task ID | 任务名称 | 描述 | 工作量（人天） | 负责人 | 依赖 | 状态 |
|---------|---------|------|--------------|--------|------|------|
| TASK-{MODULE}-004 | 功能 A 实现 | ... | 5 | @dev-a | TASK-{MODULE}-003 | 📝 待启动 |
| TASK-{MODULE}-005 | 功能 B 实现 | ... | 4 | @dev-b | TASK-{MODULE}-003 | 📝 待启动 |

### 阶段 3：集成与优化（2 周）

| Task ID | 任务名称 | 描述 | 工作量（人天） | 负责人 | 依赖 | 状态 |
|---------|---------|------|--------------|--------|------|------|
| TASK-{MODULE}-006 | 集成测试 | ... | 3 | @tester | TASK-{MODULE}-004, TASK-{MODULE}-005 | 📝 待启动 |

---

## 3. 依赖矩阵（模块内）

| 任务 | 依赖任务 | 依赖类型 | 备注 |
|------|---------|---------|------|
| TASK-{MODULE}-002 | TASK-{MODULE}-001 | FS（Finish-to-Start） | 数据库就绪后开始 |
| TASK-{MODULE}-003 | TASK-{MODULE}-002 | FS | API 框架就绪后开始 |
| TASK-{MODULE}-004 | TASK-{MODULE}-003 | FS | 基础工具完成后并行开发 |
| TASK-{MODULE}-005 | TASK-{MODULE}-003 | FS | 基础工具完成后并行开发 |

**依赖类型说明**：
- **FS (Finish-to-Start)**: A 完成后 B 才能开始
- **SS (Start-to-Start)**: A 开始后 B 才能开始（可并行）
- **FF (Finish-to-Finish)**: A 完成时 B 也要完成

---

## 4. 资源分配

| 角色 | 人员 | 分配比例 | 时间段 | 备注 |
|------|------|---------|--------|------|
| 后端开发 | @dev-a | 100% | Week 1-6 | 负责核心功能 |
| 前端开发 | @dev-b | 50% | Week 3-6 | 并行开发前端 |
| 测试工程师 | @tester | 30% | Week 5-8 | 集成测试 |

---

## 5. 模块里程碑

| 里程碑 | 目标日期 | 交付物 | 验收标准 |
|--------|---------|--------|---------|
| M1 - 基础设施完成 | 2025-01-15 | 数据库+API 框架 | 冒烟测试通过 |
| M2 - 核心功能完成 | 2025-02-15 | 功能 A、B 实现 | 单元测试通过 |
| M3 - 模块发布 | 2025-02-28 | 完整模块 | 集成测试通过 |

---

## 6. Story → Task 映射（模块内）

| Story ID | Task ID | Task 名称 | 工作量（人天） | 状态 |
|----------|---------|----------|--------------|------|
| US-{MODULE}-001 | TASK-{MODULE}-004 | 功能 A 后端实现 | 3 | ✅ 完成 |
| US-{MODULE}-001 | TASK-{MODULE}-005 | 功能 A 前端开发 | 2 | 🔄 进行中 |
| US-{MODULE}-002 | TASK-{MODULE}-006 | 功能 B 实现 | 4 | 📝 待启动 |

---

## 7. 风险登记（模块级）

| 风险 ID | 描述 | 影响 | 概率 | 缓解措施 | 负责人 | 状态 |
|---------|------|------|------|---------|--------|------|
| RISK-{MODULE}-001 | 第三方 API 延迟 | 高 | 中 | 提前 Mock，并行开发 | @dev-a | 🔄 监控中 |
| RISK-{MODULE}-002 | 资源不足 | 中 | 低 | 调整优先级 | @pm | 📝 待评估 |

---

## 8. 数据库迁移任务

### 8.1 Expand 阶段（添加新字段/表）

| Task ID | 描述 | 幂等性 | 回滚计划 |
|---------|------|--------|---------|
| TASK-DB-001-EXPAND | 添加 email 列（可空） | ✅ | DROP COLUMN |

### 8.2 Migrate/Backfill 阶段（数据迁移）

| Task ID | 描述 | 幂等性 | 回滚计划 |
|---------|------|--------|---------|
| TASK-DB-001-MIGRATE | 回填 email 数据 | ✅ | UPDATE SET NULL |

### 8.3 Contract 阶段（设置约束）

| Task ID | 描述 | 幂等性 | 回滚计划 |
|---------|------|--------|---------|
| TASK-DB-001-CONTRACT | 设置 NOT NULL 约束 | ✅ | ALTER COLUMN DROP NOT NULL |

---

## 9. 技术债务与约束

### 9.1 技术债务
- **债务1**: 当前使用 JWT，未来需迁移到 OAuth2
  - 影响范围: 用户认证模块
  - 计划时间: Q2 2025
  - 负责人: @dev-a

### 9.2 技术约束
- **约束1**: 密码存储必须使用 bcrypt（安全约束）
- **约束2**: API 响应时间 < 200ms（性能约束）

---

## 10. 变更记录

| 日期 | 版本 | 变更描述 | 变更人 |
|------|------|---------|--------|
| 2025-01-01 | v1.0 | 初始版本 | @pm |
| 2025-01-15 | v1.1 | 调整 TASK-{MODULE}-005 工期 | @dev-b |

---

## 相关文档

- [主 TASK 文档](../TASK.md)
- [PRD 模块：{domain}](../prd-modules/{domain}.md)
- [ARCH 模块：{domain}](../arch-modules/{domain}.md)
- [Story → Task 映射表](../data/story-task-mapping.md)
- [任务依赖矩阵](../data/task-dependency-matrix.md)
