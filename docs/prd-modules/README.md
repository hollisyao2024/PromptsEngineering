# PRD 模块索引

> 本目录存放按功能域拆分的详细 PRD 模块文档。
> 主 PRD（`/docs/PRD.md`）保持为权威索引和总纲。

## 何时需要拆分 PRD？

当项目满足以下**任一条件**时，建议采用模块化 PRD：

- 单文件 PRD 超过 **1000 行**
- 用户故事数量超过 **50 个**
- 存在明确的**业务域边界**（3+ 个独立子系统）
- **多团队并行协作**，需要独立编辑不同功能域

对于小型项目（< 20 用户故事），维护单一 `/docs/PRD.md` 即可。

---

## 模块命名规范

### 文件命名
- **格式**：`{domain-name}.md`（kebab-case）
- **示例**：
  - `user-management.md` — 用户管理模块
  - `payment-system.md` — 支付系统模块
  - `analytics-service.md` — 分析服务模块
  - `notification-engine.md` — 通知引擎模块

### Story ID 规范
- **格式**：`US-{MODULE}-{序号}`
- **示例**：
  - `US-USER-001` — 用户管理模块第 1 个用户故事
  - `US-PAY-005` — 支付系统模块第 5 个用户故事
  - `US-ANALYTICS-012` — 分析服务模块第 12 个用户故事

### AC（验收标准）ID 规范
- **格式**：`AC-{MODULE}-{Story序号}-{AC序号}`
- **示例**：
  - `AC-USER-001-01` — US-USER-001 的第 1 个验收标准
  - `AC-PAY-005-03` — US-PAY-005 的第 3 个验收标准

---

## 模块清单

> 由 PRD 专家在激活时维护。每个模块对应一个独立的 PRD 文档。

| 模块名称 | 优先级 | 负责团队 | 文件链接 | 状态 |
|---------|--------|---------|----------|------|
| （待添加） | - | - | - | - |

**模块状态标识**：
- ✅ **已确认**：PRD 已完成并经过评审
- 🔄 **进行中**：正在编写或修订
- 📝 **待启动**：计划中但尚未开始
- ❌ **已废弃**：不再需要

---

## 标准模块 PRD 结构

每个模块 PRD 文档应包含以下章节：

```markdown
# {功能域名称} - PRD 模块

> 所属主 PRD: [PRD.md](../PRD.md)
> 负责团队: @team-name
> 最后更新: YYYY-MM-DD

## 1. 模块概述
- 功能域定义
- 业务目标
- 成功指标

## 2. 用户故事与验收标准
### US-{MODULE}-001: {故事标题}
**作为** [用户角色]
**我希望** [功能描述]
**以便** [业务价值]

**验收标准（Given-When-Then）：**
- **Given** 前置条件
- **When** 触发动作
- **Then** 预期结果

**优先级：** P0/P1/P2
**依赖：** [关联其他 Story ID]

## 3. 模块级非功能需求
- 性能要求（模块特定）
- 数据保留策略
- 安全要求（模块特定）

## 4. 接口与依赖
- 上游依赖（其他模块）
- 下游消费方
- 外部 API 依赖

## 5. 数据模型（概要）
- 核心实体
- 关键字段（详见 data/dictionary.md）

## 6. 风险与约束
- 模块特定风险
- 技术债务或已知限制
```

---

## 模块间协作规范

### 依赖管理
- 模块间依赖在主 PRD 的"里程碑与依赖"章节中维护全局视图
- 每个模块 PRD 在"接口与依赖"章节明确列出上下游关系
- 使用 Story ID 引用跨模块依赖（如 `依赖: US-USER-003`）

### 数据共享
- 跨模块共享的数据实体在 `/docs/data/dictionary.md` 中统一定义
- 模块 PRD 引用数据字典，避免重复定义

### 追溯矩阵
- 所有模块的 Story → AC → Test Case ID 映射集中维护在 `/docs/data/traceability-matrix.md`
- 便于 QA 专家全局验证与追溯

---

## 维护指南

### PRD 专家职责
1. **拆分决策**：评估项目是否需要模块化 PRD
2. **模块规划**：定义功能域边界，在主 PRD 中维护索引
3. **内容编写**：按模块创建或更新详细 PRD 文档
4. **一致性检查**：确保主 PRD 与各模块 PRD 同步，无矛盾或遗漏

### 与其他专家的协作
- **ARCHITECTURE 专家**：基于主 PRD + 各模块 PRD 输出架构文档
- **TASK 专家**：基于模块 PRD 拆解任务，可按模块维护独立的 WBS
- **QA 专家**：基于追溯矩阵验证各模块需求的实现与测试覆盖

### 版本管理
- 每次模块 PRD 更新时，在文档头部更新"最后更新"时间戳
- 重大变更需在主 PRD 的"变更记录"章节中记录
- 若变更涉及架构决策，新增 ADR 至 `/docs/adr/NNN-*.md`

---

## 示例模板

见 [PRD-WRITER-EXPERT.playbook.md](../../AgentRoles/Handbooks/PRD-WRITER-EXPERT.playbook.md) 第 7 章："大型项目 PRD 拆分指南"。

---

> 本目录由 PRD 专家维护。其他专家需引用模块 PRD 时，优先通过主 PRD 索引定位，按需加载所需模块。
