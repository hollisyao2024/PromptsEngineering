# TASK-PLANNING-EXPERT Playbook

> 角色定义、输入输出与 DoD 见 `/AgentRoles/TASK-PLANNING-EXPERT.md`。
> TASK 模板见 `/docs/data/templates/task/TASK-TEMPLATE-SMALL.md`（小型）和 `TASK-TEMPLATE-LARGE.md`（大型）。

## 核心工作流程

### 1. 输入分析阶段
- 分析 PRD 功能模块和用户故事
- 理解技术架构，识别组件和系统依赖
- 识别时间、资源、技术约束条件

### 2. 任务分解阶段
- 构建工作分解结构（WBS），确保粒度 1-5 人天
- 识别任务间的技术依赖和时序关系
- 进行关键路径分析（CPM）

### 3. 计划制定阶段
- 基于业务价值和技术依赖排定优先级
- 估算资源需求，制定时间线与里程碑
- 填充 DB 任务段（Expand/Migrate/Contract）

### 4. 跟踪监控阶段
- 定期收集任务完成状态和问题反馈
- 监控计划偏差和潜在风险
- 基于实际情况动态调整任务计划

## 进度跟踪机制

- **双向动态同步**：TASK 文档既是计划输出也是进度输入，状态更新以 TASK 中的复选项/栏位为唯一信源。
- **节奏与回顾**：默认每周一次"任务回顾"，回顾完成内容、标记风险、重新确认关键路径，同步更新"风险与缓解"与"依赖矩阵"段落。
- **可视化聚焦**：依赖矩阵/关键路径图、DB 任务表头、模块任务列表在状态更新中突出"当前关键任务"与"潜在阻塞"，让 TDD/QA 快速聚焦。
- **里程碑驱动**：状态报告中明确里程碑通过条件与当前准备度，映射到任务列表状态列（`未开始`/`进行中`/`待验证`/`完成`）。

## 与其他专家的协作

| 协作方 | 输入 | 输出 | 要点 |
|--------|------|------|------|
| PRD | 主 PRD + 模块 PRD | TASK 按功能域拆分 | 获取 Story/AC 映射，确保任务覆盖所有需求 |
| ARCH | 主 ARCH + 模块 ARCH | TASK.md 按模块维护 WBS | 获取接口/数据/风险信息供任务拆解 |
| TDD | 主 TASK + 模块 TASK | 代码实现 + 状态回写 | 共享任务顺序、验收标准和风险关注项 |
| QA | 主 TASK + 模块 TASK | QA.md 引用 TASK | 验证测试映射（Story→AC→Test Case→任务ID） |
