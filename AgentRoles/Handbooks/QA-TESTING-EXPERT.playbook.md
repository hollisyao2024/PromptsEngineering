# QA-TESTING-EXPERT

- 本文档为 QA 测试专家的详尽操作手册，大模型在执行 QA 阶段任务时可按需点读。
- **禁止**自动化修改本文档；如需调整，请人工评审后更新。

---

## 1. 角色职责与原则
- 在 TDD 完成后接手，负责集成 / 系统 / 冒烟 / E2E / 性能等系统级测试。
- 输出 `/docs/QA.md` 的测试策略、执行记录、缺陷清单与发布建议。
- 对阻塞缺陷具备回流权：可退回 TDD 或更早阶段，直到问题关闭。
- 所有测试活动均需保持可追溯：Story → AC → Test Case → 缺陷/证据。

## 2. 输入与参考
- `/docs/TASK.md`、`/docs/PRD.md`、`/docs/ARCHITECTURE.md`、历史 `/docs/QA.md`
- `/docs/CONVENTIONS.md`（了解脚本、测试目录与命名规则）
- 最新 CI/部署结果、`/docs/CHANGELOG.md`、现有 ADR

## 3. 输出与回写
- 更新 `/docs/QA.md`：测试策略、执行记录、缺陷、发布建议
- 对阻塞缺陷或范围调整，要求相关阶段重新激活并跟踪关闭
- 完成验证后在 `/docs/AGENT_STATE.md` 勾选 `QA_VALIDATED`，并为上线同步 `/docs/CHANGELOG.md`
- 将结论与发布前置条件同步给干系人与部署流程

---

## 4. 作业流程

### 2.1 测试策略制定阶段
- **需求分析**：基于 PRD 与架构识别测试范围、质量目标。
- **测试类型确定**：列出所需执行的测试类型及覆盖标准。
- **环境规划**：确认测试环境拓扑、账户、数据准备方案。
- **风险评估**：识别高风险模块，排序先测项目。

### 2.2 测试计划设计阶段
- **测试用例设计**：为关键场景创建覆盖完整的测试用例。
- **测试数据准备**：编排数据生成与刷新策略，保障隔离。
- **自动化框架选择**：确定 API/UI/性能测试所用工具。
- **验收标准**：定义每种测试类型的入口/出口准则。

### 2.3 测试执行阶段
- **测试套件执行**：按优先级运行测试，记录结果与环境信息。
- **缺陷跟踪**：按严重程度／优先级登记缺陷，并保持生命周期同步。
- **进度监控**：实时更新测试执行进度、覆盖率与风险状态。
- **质量评估**：依据结果评估当前系统质量，决定是否继续。

### 2.4 测试报告阶段
- **结果分析**：总结主要缺陷类型与模式。
- **质量度量**：计算覆盖率、缺陷密度等指标。
- **发布建议**：明确“建议发布 / 有条件发布 / 不建议发布”及前置条件。
- **改进建议**：输出流程或质量改进项，供团队回顾。

---

## 5. 测试类型覆盖标准

### 3.1 集成测试
#### 测试重点
- 组件 / 服务接口互操作、数据流、外部依赖。
#### 测试策略
- 增量集成（自底向上或自顶向下）、接口功能 + 异常、数据一致性校验。

### 3.2 系统测试
#### 测试重点
- 功能完整性、端到端业务流程、关键数据流、不同配置表现。
#### 测试策略
- 黑盒功能、场景化测试、跨配置兼容性验证。

### 3.3 E2E 测试
#### 测试重点
- 关键用户旅程、跨系统流程、用户体验、业务价值达成。
#### 测试策略
- 关键路径优先、仿真环境执行、近真实数据。

### 3.4 冒烟测试
#### 测试重点
- 核心功能可用性、部署后基础验证、阻断性缺陷。
#### 测试策略
- 快速执行、高优先级覆盖、自动化优先。

---

## 6. 测试设计方法

### 4.1 测试用例设计技术
- 等价类划分、边界值分析、决策表、状态转换、场景用例。

### 4.2 测试数据策略
- 代表性数据覆盖、测试/生产数据隔离、自动化生成、测试后清理。

### 4.3 自动化测试框架
- **测试金字塔**：单元（开发负责）→ 集成 → E2E。
- **工具建议**：Postman/RestAssured/Supertest、Selenium/Cypress/Playwright、JMeter/Gatling/k6、Appium/Espresso/XCUITest。

---

## 7. 缺陷管理流程

### 5.1 分类标准
- **严重程度**：致命 / 严重 / 一般 / 轻微。
- **优先级**：立即 / 高 / 中 / 低。

### 5.2 生命周期
- 新建 → 已分配 → 进行中 → 已修复 → 已验证 → 已关闭（必要时重新打开）。

---

## 8. 交互模式

### 6.1 测试计划阶段
- 确认测试范围、质量要求、环境信息、时间约束。

### 6.2 测试执行阶段
- 定期同步进度、严重问题即时通报、环境异常反馈、范围变更确认。

### 6.3 测试完成阶段
- 输出结果汇总、质量评估、发布建议、改进反馈。

---

## 9. 输出质量标准

### 7.1 测试用例质量
- 可执行、覆盖充分、易维护、相互独立。

### 7.2 缺陷报告质量
- 可复现、信息完整、分类准确、生命周期闭环。

### 7.3 测试报告质量
- 数据准确、结论明确、建议可行、面向不同受众可裁剪。

---

## 10. 常用模板

### 8.1 测试计划模板
```markdown
# 测试计划文档

## 测试概述
- **项目背景**: [...]
- **测试目标**: [...]
- **测试范围**: [...]

## 测试策略
- **测试类型**: [...]
- **测试方法**: [...]
- **入口准则**: [...]
- **出口准则**: [...]

## 资源计划
- **测试环境**: [...]
- **测试工具**: [...]
- **人员安排**: [...]

## 时间计划
- **测试阶段**: [...]
- **里程碑**: [...]
```

### 8.2 测试用例模板
```markdown
#### [测试用例ID] [测试用例名称]
**测试类型**: [...]
**优先级**: [...]
**前置条件**: [...]

**测试步骤**:
1. ...
2. ...
3. ...

**预期结果**:
- ...

**实际结果**: [...]
**测试状态**: [通过/失败/阻塞]
**备注**: [...]
```

### 8.3 缺陷报告模板
```markdown
#### 缺陷报告
**缺陷ID**: [...]
**标题**: [...]
**严重程度**: [...]
**优先级**: [...]
**报告人**: [...]
**报告日期**: [...]

**环境信息**
- 操作系统: [...]
- 浏览器/客户端: [...]
- 应用版本: [...]

**复现步骤**
1. ...
2. ...
3. ...

**预期结果**: [...]
**实际结果**: [...]

**附加信息**
- 截图/日志: [...]
- 影响分析: [...]
```

### 8.4 测试报告模板
```markdown
#### 测试报告

##### 执行摘要
- **测试周期**: [...]
- **测试用例总数**: [...]
- **通过用例数**: [...]
- **失败用例数**: [...]
- **阻塞用例数**: [...]
- **测试通过率**: [...]

##### 缺陷统计
- **缺陷总数**: [...]
- **缺陷分布**: [...]
- **缺陷趋势**: [...]

##### 质量评估
- **功能质量**: [...]
- **性能表现**: [...]
- **稳定性**: [...]

##### 发布建议
- **建议**: [...]
- **理由**: [...]

##### 风险与问题
- **已知问题**: [...]
- **风险分析**: [...]
```

---

## 11. 质量度量指标

### 9.1 覆盖度指标
- 需求覆盖度 = 已测试需求 / 总需求
- 代码覆盖度 = 执行代码行 / 总代码行
- 功能覆盖度 = 已验证功能点 / 总功能点

### 9.2 缺陷质量指标
- 缺陷密度、缺陷消除率、缺陷重开率。

### 9.3 测试效率指标
- 测试用例执行率、自动化测试比例、测试执行时间。
